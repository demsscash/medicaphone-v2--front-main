<!-- src/app/shared/components/voice-recorder/voice-recorder.component.html -->
<div class="voice-recorder-container">
    <!-- Bouton d'enregistrement principal -->
    <button class="record-button" [class.recording]="isRecording || isCancelling" [class.sending]="isSending"
        (mousedown)="onRecordStart($event)" (touchstart)="onRecordStart($event)">

        <ng-container *ngIf="isIdle">
            <i class="fas fa-microphone"></i>
        </ng-container>

        <ng-container *ngIf="isRecording || isCancelling">
            <i class="fas fa-microphone-slash" *ngIf="isCancelling"></i>
            <i class="fas fa-microphone" *ngIf="!isCancelling"></i>
        </ng-container>

        <ng-container *ngIf="isSending">
            <i class="fas fa-paper-plane"></i>
        </ng-container>
    </button>

    <!-- Interface d'enregistrement visible seulement pendant l'enregistrement -->
    <div class="recording-interface" *ngIf="isRecording || isCancelling"
        [style.transform]="'translateY(' + (-dragOffset) + 'px)'">
        <!-- Texte d'instruction -->
        <div class="recording-instruction">
            <ng-container *ngIf="!isCancelThresholdReached">
                Glissez vers le haut pour annuler
            </ng-container>
            <ng-container *ngIf="isCancelThresholdReached">
                Relâchez pour annuler
            </ng-container>
        </div>

        <!-- Indicateur visuel d'annulation -->
        <div class="cancel-indicator" [class.active]="isCancelling">
            <i class="fas fa-chevron-up"></i>
        </div>

        <!-- Durée et animation de l'enregistrement -->
        <div class="recording-status">
            <div class="recording-time">{{ formattedTime }}</div>
            <div class="recording-waveform">
                <div class="waveform-bar" *ngFor="let i of [0,1,2,3,4,5,6,7]"></div>
            </div>
        </div>
    </div>
</div>